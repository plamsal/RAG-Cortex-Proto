--liquibase formatted sql
--changeset RAML:am901234567-0123-4567-89ab-890123456789  runOnChange:true


CREATE OR REPLACE TABLE ENERGYDB.CUSTOMERS (
    CUSTOMER_ID VARCHAR(50) PRIMARY KEY,
    ACCOUNT_NUMBER VARCHAR(30) NOT NULL UNIQUE,
    FIRST_NAME VARCHAR(100),
    LAST_NAME VARCHAR(100),
    EMAIL VARCHAR(150),
    PHONE_NUMBER VARCHAR(20),
    SERVICE_ADDRESS VARCHAR(500),
    CITY VARCHAR(100),
    STATE VARCHAR(50),
    ZIP_CODE VARCHAR(20),
    ACCOUNT_TYPE VARCHAR(30),
    SERVICE_START_DATE DATE,
    STATUS VARCHAR(30),
    AUTO_PAY_ENABLED BOOLEAN,
    PAPERLESS_BILLING BOOLEAN,
    RATE_PLAN VARCHAR(50)
);

INSERT INTO ENERGYDB.CUSTOMERS VALUES
('CUST-E001', 'ACC-ENERGY-2023-001', 'Thomas', 'Anderson', 'thomas.a@email.com', '+1-555-8001', '123 Power St', 'San Diego', 'CA', '92101', 'RESIDENTIAL', '2023-01-15', 'ACTIVE', TRUE, TRUE, 'RESIDENTIAL_STANDARD'),
('CUST-E002', 'ACC-ENERGY-2022-045', 'Jessica', 'Brown', 'jessica.b@email.com', '+1-555-8002', '456 Electric Ave', 'Portland', 'OR', '97201', 'RESIDENTIAL', '2022-06-22', 'ACTIVE', TRUE, TRUE, 'RESIDENTIAL_TIME_OF_USE'),
('CUST-E003', 'ACC-ENERGY-2024-001', 'TechCorp Industries', 'info@techcorp.com', 'info@techcorp.com', '+1-555-8003', '789 Industrial Pkwy', 'Austin', 'TX', '78701', 'COMMERCIAL', '2024-03-10', 'ACTIVE', TRUE, TRUE, 'COMMERCIAL_LARGE'),
('CUST-E004', 'ACC-ENERGY-2023-089', 'Maria', 'Garcia', 'maria.g@email.com', '+1-555-8004', '321 Renewable Rd', 'Boulder', 'CO', '80301', 'RESIDENTIAL', '2023-09-05', 'ACTIVE', FALSE, TRUE, 'RESIDENTIAL_SOLAR'),
('CUST-E005', 'ACC-ENERGY-2024-015', 'Green Mart', 'billing@greenmart.com', 'billing@greenmart.com', '+1-555-8005', '654 Business Blvd', 'Seattle', 'WA', '98101', 'COMMERCIAL', '2024-07-20', 'ACTIVE', TRUE, FALSE, 'COMMERCIAL_SMALL');


CREATE OR REPLACE TABLE ENERGYDB.METERS (
    METER_ID VARCHAR(50) PRIMARY KEY,
    METER_NUMBER VARCHAR(30) NOT NULL UNIQUE,
    CUSTOMER_ID VARCHAR(50),
    METER_TYPE VARCHAR(30),
    INSTALLATION_DATE DATE,
    LAST_READING_DATE DATE,
    CURRENT_READING DECIMAL(12,2),
    PREVIOUS_READING DECIMAL(12,2),
    UNIT_OF_MEASURE VARCHAR(10),
    STATUS VARCHAR(30),
    SMART_METER BOOLEAN
);

INSERT INTO ENERGYDB.METERS VALUES
('MTR001', 'MTR-2023-001', 'CUST-E001', 'ELECTRIC', '2023-01-20', '2025-12-01', 15420.50, 14980.25, 'KWH', 'ACTIVE', TRUE),
('MTR002', 'MTR-2022-045', 'CUST-E002', 'ELECTRIC', '2022-06-25', '2025-12-01', 22150.75, 21680.50, 'KWH', 'ACTIVE', TRUE),
('MTR003', 'MTR-2024-001', 'CUST-E003', 'ELECTRIC', '2024-03-15', '2025-12-01', 185600.00, 180200.00, 'KWH', 'ACTIVE', TRUE),
('MTR004', 'MTR-2023-089', 'CUST-E004', 'ELECTRIC', '2023-09-10', '2025-12-01', 8750.25, 8420.75, 'KWH', 'ACTIVE', TRUE),
('MTR005', 'MTR-2024-015', 'CUST-E005', 'ELECTRIC', '2024-07-25', '2025-12-01', 42800.50, 41500.25, 'KWH', 'ACTIVE', TRUE);
