--liquibase formatted sql
--changeset PratikL:an012345678-1234-5678-9abc-901234567890  runOnChange:true


CREATE OR REPLACE TABLE ENERGYDB.CONSUMPTION_RECORDS (
    CONSUMPTION_ID VARCHAR(50) PRIMARY KEY,
    METER_ID VARCHAR(50),
    READING_DATE DATE,
    READING_TIME TIME,
    CONSUMPTION_KWH DECIMAL(12,2),
    PEAK_DEMAND_KW DECIMAL(10,2),
    TIME_OF_USE_PERIOD VARCHAR(20),
    TEMPERATURE_F INT,
    GENERATED_SOLAR_KWH DECIMAL(10,2),
    NET_CONSUMPTION_KWH DECIMAL(12,2)
);

INSERT INTO ENERGYDB.CONSUMPTION_RECORDS VALUES
('CONS001', 'MTR001', '2025-12-01', '23:59:59', 440.25, 4.5, 'OFF_PEAK', 68, 0.00, 440.25),
('CONS002', 'MTR002', '2025-12-01', '23:59:59', 470.25, 5.2, 'OFF_PEAK', 62, 0.00, 470.25),
('CONS003', 'MTR003', '2025-12-01', '23:59:59', 5400.00, 125.5, 'ON_PEAK', 70, 0.00, 5400.00),
('CONS004', 'MTR004', '2025-12-01', '23:59:59', 329.50, 3.8, 'OFF_PEAK', 65, 125.00, 204.50),
('CONS005', 'MTR005', '2025-12-01', '23:59:59', 1300.25, 28.5, 'ON_PEAK', 72, 0.00, 1300.25),
('CONS006', 'MTR001', '2025-12-02', '23:59:59', 445.00, 4.6, 'OFF_PEAK', 70, 0.00, 445.00);


CREATE OR REPLACE TABLE ENERGYDB.RATE_SCHEDULES (
    RATE_PLAN VARCHAR(50) PRIMARY KEY,
    CUSTOMER_TYPE VARCHAR(30),
    BASE_CHARGE DECIMAL(10,2),
    ENERGY_CHARGE_PER_KWH DECIMAL(8,4),
    PEAK_RATE_MULTIPLIER DECIMAL(5,2),
    OFF_PEAK_DISCOUNT DECIMAL(5,2),
    DEMAND_CHARGE_PER_KW DECIMAL(10,2),
    SOLAR_CREDIT_PER_KWH DECIMAL(8,4),
    EFFECTIVE_DATE DATE
);

INSERT INTO ENERGYDB.RATE_SCHEDULES VALUES
('RESIDENTIAL_STANDARD', 'RESIDENTIAL', 15.00, 0.1250, 1.00, 0.00, 0.00, 0.0000, '2025-01-01'),
('RESIDENTIAL_TIME_OF_USE', 'RESIDENTIAL', 12.00, 0.1150, 1.50, 0.20, 0.00, 0.0000, '2025-01-01'),
('RESIDENTIAL_SOLAR', 'RESIDENTIAL', 10.00, 0.1200, 1.00, 0.00, 0.00, 0.0800, '2025-01-01'),
('COMMERCIAL_SMALL', 'COMMERCIAL', 50.00, 0.1100, 1.30, 0.15, 5.00, 0.0000, '2025-01-01'),
('COMMERCIAL_LARGE', 'COMMERCIAL', 200.00, 0.0950, 1.40, 0.18, 12.00, 0.0000, '2025-01-01');
