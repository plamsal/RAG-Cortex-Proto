--liquibase formatted sql
--changeset PratikL:9012345678-90ab-cdef-0123-456789abcdef  runOnChange:true


CREATE OR REPLACE TABLE RETAILDB.ORDERS (
    ORDER_ID VARCHAR(50) PRIMARY KEY,
    ORDER_NUMBER VARCHAR(30) NOT NULL UNIQUE,
    CUSTOMER_ID VARCHAR(50),
    ORDER_DATE TIMESTAMP_NTZ,
    ORDER_STATUS VARCHAR(30),
    TOTAL_AMOUNT DECIMAL(12,2),
    DISCOUNT_AMOUNT DECIMAL(12,2),
    TAX_AMOUNT DECIMAL(12,2),
    SHIPPING_AMOUNT DECIMAL(12,2),
    FINAL_AMOUNT DECIMAL(12,2),
    PAYMENT_METHOD VARCHAR(30),
    PAYMENT_STATUS VARCHAR(30),
    SHIPPING_ADDRESS VARCHAR(500),
    BILLING_ADDRESS VARCHAR(500),
    TRACKING_NUMBER VARCHAR(50),
    ESTIMATED_DELIVERY_DATE DATE,
    ACTUAL_DELIVERY_DATE DATE,
    NOTES VARCHAR(1000)
);

INSERT INTO RETAILDB.ORDERS VALUES
('ORD001', 'ORD-2025-001', 'CUST001', '2025-12-15 10:30:00', 'DELIVERED', 114.98, 10.00, 9.50, 7.99, 122.47, 'CREDIT_CARD', 'PAID', '123 Main St, New York, NY 10001', '123 Main St, New York, NY 10001', 'TRK001', '2025-12-18', '2025-12-17', 'Customer requested gift wrapping'),
('ORD002', 'ORD-2025-002', 'CUST002', '2025-12-16 14:20:00', 'SHIPPED', 89.99, 0.00, 7.20, 5.99, 103.18, 'PAYPAL', 'PAID', '456 Oak Ave, Los Angeles, CA 90001', '456 Oak Ave, Los Angeles, CA 90001', 'TRK002', '2025-12-20', NULL, NULL),
('ORD003', 'ORD-2025-003', 'CUST003', '2025-12-17 09:15:00', 'PROCESSING', 74.97, 5.00, 6.30, 0.00, 76.27, 'CREDIT_CARD', 'PAID', '789 High St, London, UK SW1A 1AA', '789 High St, London, UK SW1A 1AA', NULL, '2025-12-22', NULL, 'Express shipping requested'),
('ORD004', 'ORD-2025-004', 'CUST004', '2025-12-14 16:45:00', 'CANCELLED', 39.99, 0.00, 3.20, 4.99, 48.18, 'DEBIT_CARD', 'REFUNDED', '321 Park Blvd, Chicago, IL 60601', '321 Park Blvd, Chicago, IL 60601', NULL, NULL, NULL, 'Customer requested cancellation'),
('ORD005', 'ORD-2025-005', 'CUST005', '2025-12-18 08:00:00', 'PENDING', 34.99, 0.00, 2.80, 6.99, 44.78, 'AMAZON_PAY', 'PENDING', '654 King Rd, Manchester, UK M1 1AA', '654 King Rd, Manchester, UK M1 1AA', NULL, '2025-12-23', NULL, NULL);


CREATE OR REPLACE TABLE RETAILDB.ORDER_ITEMS (
    ORDER_ITEM_ID VARCHAR(50) PRIMARY KEY,
    ORDER_ID VARCHAR(50),
    PRODUCT_ID VARCHAR(50),
    QUANTITY INT,
    UNIT_PRICE DECIMAL(10,2),
    DISCOUNT_PERCENT DECIMAL(5,2),
    LINE_TOTAL DECIMAL(12,2)
);

INSERT INTO RETAILDB.ORDER_ITEMS VALUES
('ORDITEM001', 'ORD001', 'PROD001', 1, 89.99, 10.00, 80.99),
('ORDITEM002', 'ORD001', 'PROD002', 1, 24.99, 0.00, 24.99),
('ORDITEM003', 'ORD001', 'PROD003', 1, 12.99, 10.00, 11.69),
('ORDITEM004', 'ORD002', 'PROD001', 1, 89.99, 0.00, 89.99),
('ORDITEM005', 'ORD003', 'PROD002', 3, 24.99, 0.00, 74.97),
('ORDITEM006', 'ORD004', 'PROD004', 1, 39.99, 0.00, 39.99),
('ORDITEM007', 'ORD005', 'PROD005', 1, 34.99, 0.00, 34.99);
