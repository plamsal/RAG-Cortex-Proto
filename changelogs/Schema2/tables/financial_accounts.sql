--liquibase formatted sql
--changeset RAML:3a4b5c6d-7e8f-9012-3456-789abcdef012  runOnChange:true


CREATE OR REPLACE TABLE FINANCEDB.CUSTOMER_ACCOUNTS (
    ACCOUNT_ID VARCHAR(50) PRIMARY KEY,
    CUSTOMER_ID VARCHAR(50) NOT NULL,
    ACCOUNT_NUMBER VARCHAR(20) NOT NULL,
    ACCOUNT_TYPE VARCHAR(30),
    CURRENCY_CODE VARCHAR(3),
    OPENING_DATE DATE,
    CURRENT_BALANCE DECIMAL(18,2),
    AVAILABLE_BALANCE DECIMAL(18,2),
    OVERDRAFT_LIMIT DECIMAL(18,2),
    INTEREST_RATE DECIMAL(5,2),
    STATUS VARCHAR(20),
    BRANCH_CODE VARCHAR(10),
    RELATIONSHIP_MANAGER VARCHAR(100),
    LAST_TRANSACTION_DATE TIMESTAMP_NTZ,
    CREATED_DATETIME TIMESTAMP_NTZ DEFAULT CURRENT_TIMESTAMP(),
    MODIFIED_DATETIME TIMESTAMP_NTZ DEFAULT CURRENT_TIMESTAMP()
);

INSERT INTO FINANCEDB.CUSTOMER_ACCOUNTS VALUES
('ACC001', 'CUST001', '1001234567', 'SAVINGS', 'USD', '2023-01-15', 15000.00, 15000.00, 0.00, 2.50, 'ACTIVE', 'BR001', 'John Manager', '2025-12-15 10:30:00', CURRENT_TIMESTAMP(), CURRENT_TIMESTAMP()),
('ACC002', 'CUST002', '1001234568', 'CHECKING', 'USD', '2023-03-20', 5000.00, 4500.00, 1000.00, 0.50, 'ACTIVE', 'BR001', 'Jane Smith', '2025-12-16 14:20:00', CURRENT_TIMESTAMP(), CURRENT_TIMESTAMP()),
('ACC003', 'CUST003', '1001234569', 'SAVINGS', 'EUR', '2023-05-10', 25000.00, 25000.00, 0.00, 3.00, 'ACTIVE', 'BR002', 'Mike Johnson', '2025-12-17 09:15:00', CURRENT_TIMESTAMP(), CURRENT_TIMESTAMP()),
('ACC004', 'CUST004', '1001234570', 'INVESTMENT', 'USD', '2022-11-05', 100000.00, 100000.00, 0.00, 4.50, 'ACTIVE', 'BR003', 'Sarah Williams', '2025-12-14 16:45:00', CURRENT_TIMESTAMP(), CURRENT_TIMESTAMP()),
('ACC005', 'CUST005', '1001234571', 'CHECKING', 'GBP', '2024-02-28', 8000.00, 7200.00, 2000.00, 0.75, 'ACTIVE', 'BR002', 'John Manager', '2025-12-18 08:00:00', CURRENT_TIMESTAMP(), CURRENT_TIMESTAMP());


CREATE OR REPLACE TABLE FINANCEDB.CUSTOMER_INFO (
    CUSTOMER_ID VARCHAR(50) PRIMARY KEY,
    FIRST_NAME VARCHAR(100),
    LAST_NAME VARCHAR(100),
    EMAIL VARCHAR(150),
    PHONE_NUMBER VARCHAR(20),
    DATE_OF_BIRTH DATE,
    ADDRESS_LINE1 VARCHAR(200),
    CITY VARCHAR(100),
    COUNTRY VARCHAR(100),
    POSTAL_CODE VARCHAR(20),
    CUSTOMER_SEGMENT VARCHAR(30),
    RISK_RATING VARCHAR(20),
    KYC_STATUS VARCHAR(20),
    ONBOARDING_DATE DATE
);

INSERT INTO FINANCEDB.CUSTOMER_INFO VALUES
('CUST001', 'Robert', 'Johnson', 'robert.j@email.com', '+1-555-0101', '1985-06-15', '123 Main St', 'New York', 'USA', '10001', 'RETAIL', 'LOW', 'VERIFIED', '2023-01-10'),
('CUST002', 'Emily', 'Davis', 'emily.d@email.com', '+1-555-0102', '1990-03-22', '456 Oak Ave', 'Los Angeles', 'USA', '90001', 'RETAIL', 'LOW', 'VERIFIED', '2023-03-15'),
('CUST003', 'Michael', 'Brown', 'michael.b@email.com', '+44-20-5550103', '1978-11-30', '789 High St', 'London', 'UK', 'SW1A 1AA', 'PREMIUM', 'MEDIUM', 'VERIFIED', '2023-05-05'),
('CUST004', 'Jennifer', 'Wilson', 'jennifer.w@email.com', '+1-555-0104', '1972-08-18', '321 Park Blvd', 'Chicago', 'USA', '60601', 'WEALTH', 'LOW', 'VERIFIED', '2022-11-01'),
('CUST005', 'David', 'Martinez', 'david.m@email.com', '+44-20-5550105', '1995-12-25', '654 King Rd', 'Manchester', 'UK', 'M1 1AA', 'RETAIL', 'MEDIUM', 'VERIFIED', '2024-02-20');
