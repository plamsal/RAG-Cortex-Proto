--liquibase formatted sql
--changeset PratikL:4b5c6d7e-8f90-1234-5678-9abcdef01234  runOnChange:true


CREATE OR REPLACE TABLE FINANCEDB.TRANSACTIONS (
    TRANSACTION_ID VARCHAR(50) PRIMARY KEY,
    ACCOUNT_ID VARCHAR(50) NOT NULL,
    TRANSACTION_TYPE VARCHAR(30),
    TRANSACTION_DATE TIMESTAMP_NTZ,
    AMOUNT DECIMAL(18,2),
    CURRENCY_CODE VARCHAR(3),
    DESCRIPTION VARCHAR(500),
    MERCHANT_NAME VARCHAR(200),
    MERCHANT_CATEGORY VARCHAR(50),
    REFERENCE_NUMBER VARCHAR(100),
    STATUS VARCHAR(20),
    CHANNEL VARCHAR(30),
    BALANCE_AFTER_TRANSACTION DECIMAL(18,2),
    POSTING_DATE DATE,
    CREATED_BY VARCHAR(100)
);

INSERT INTO FINANCEDB.TRANSACTIONS VALUES
('TXN001', 'ACC001', 'DEPOSIT', '2025-12-15 10:30:00', 1000.00, 'USD', 'Salary deposit', 'ACME Corp', 'PAYROLL', 'REF001', 'COMPLETED', 'ACH', 15000.00, '2025-12-15', 'SYSTEM'),
('TXN002', 'ACC002', 'WITHDRAWAL', '2025-12-16 14:20:00', -200.00, 'USD', 'ATM withdrawal', 'Chase ATM', 'CASH', 'REF002', 'COMPLETED', 'ATM', 4800.00, '2025-12-16', 'SYSTEM'),
('TXN003', 'ACC002', 'PURCHASE', '2025-12-16 15:45:00', -300.00, 'USD', 'Online purchase', 'Amazon.com', 'ECOMMERCE', 'REF003', 'COMPLETED', 'ONLINE', 4500.00, '2025-12-16', 'SYSTEM'),
('TXN004', 'ACC003', 'TRANSFER', '2025-12-17 09:15:00', 5000.00, 'EUR', 'International transfer', 'Wire Transfer', 'TRANSFER', 'REF004', 'COMPLETED', 'WIRE', 25000.00, '2025-12-17', 'SYSTEM'),
('TXN005', 'ACC004', 'DIVIDEND', '2025-12-14 16:45:00', 2500.00, 'USD', 'Quarterly dividend', 'Investment Fund', 'INVESTMENT', 'REF005', 'COMPLETED', 'SYSTEM', 102500.00, '2025-12-14', 'SYSTEM'),
('TXN006', 'ACC005', 'PURCHASE', '2025-12-18 08:00:00', -800.00, 'GBP', 'Point of sale', 'Tesco Supermarket', 'RETAIL', 'REF006', 'COMPLETED', 'POS', 7200.00, '2025-12-18', 'SYSTEM'),
('TXN007', 'ACC001', 'INTEREST', '2025-12-01 00:00:00', 31.25, 'USD', 'Monthly interest credit', 'Bank', 'INTEREST', 'REF007', 'COMPLETED', 'SYSTEM', 14031.25, '2025-12-01', 'SYSTEM');


CREATE OR REPLACE TABLE FINANCEDB.TRANSACTION_LIMITS (
    ACCOUNT_TYPE VARCHAR(30) PRIMARY KEY,
    DAILY_WITHDRAWAL_LIMIT DECIMAL(18,2),
    DAILY_PURCHASE_LIMIT DECIMAL(18,2),
    MONTHLY_TRANSFER_LIMIT DECIMAL(18,2),
    SINGLE_TRANSACTION_LIMIT DECIMAL(18,2)
);

INSERT INTO FINANCEDB.TRANSACTION_LIMITS VALUES
('SAVINGS', 1000.00, 5000.00, 50000.00, 10000.00),
('CHECKING', 2000.00, 10000.00, 100000.00, 15000.00),
('INVESTMENT', 5000.00, 25000.00, 500000.00, 100000.00),
('PREMIUM', 10000.00, 50000.00, 1000000.00, 250000.00);
